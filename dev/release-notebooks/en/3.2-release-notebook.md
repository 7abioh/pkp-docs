---
generateHeadingToc: true
title: OJS/OMP v3.2 Release Notebook - OJS/OMP
---

# Release Notebook for OJS/OMP v3.2

OJS and OMP v3.2 was [released](...) on XX Feb, 2020. This release notebook provides technical guidance on changes that will impact software developers, plugin and theme authors, and anyone who works with the application codebase.

## Versioning for articles and monographs

This release introduces article and monograph versioning. This is a significant breaking change that will impact almost all third-party code. When a submission is published, changes to the publication are locked and can only be made by creating and publishing a new version of that submission.

To accomplish this, a new `Publication` object has been introduced which stores a submission's title, metadata, contributors, galleys and any data related to the published submission.

Read our guidance on [working with publication versions](/dev/documentation/en/publication-versions). Learn how this will impact [custom themes](...). And view the documentation for changes to the [REST API endpoints](/dev/api/ojs/3.2).

## PublishedArticle and PublishedMonograph removed

The `PublishedArticle` and `PublishedMonograph` objects have been removed. Check the submission's status to determine if it is published.

```php
if ($submission->getData('status') === STATUS_PUBLISHED) {
	// submission is published
}
```

The `PublishedArticleDAO` and `PublishedMonographDAO` DAOs have also been removed. Published submissions should be retrieved by using the `status` argument of the submission [service](http://localhost:4000/dev/documentation/en/architecture-services).

```php
$publishedSubmissions = Services::get('submission')
	->getMany(['status' => STATUS_PUBLISHED]);
```

The data of a `PublishedArticle` or `PublishedMonograph` has been migrated to the `Publication` object. See [publication versions](/dev/documentation/en/publication-versions).

## Translations now use .po files

Translation files have been converted from `xml` to `po` files andall translations should be submitted through our [Weblate translation server](https://pkp.sfu.ca/2020/01/22/introducing-weblate-a-new-path-for-ojs-omp-translations/).

Using translations in the application has not changed and should still use the `__('example.phrase')` syntax.

## New status introduced: STATUS_SCHEDULED

In OJS, a `Submission` or `Publication` will be set to `STATUS_SCHEDULED` when it has been approved for publication in an issue that is not yet published. It will be granted `STATUS_PUBLISHED` when the issue is published.

In OMP, `STATUS_SCHEDULED` will be set when a `Publication` has been approved for publication with a `datePublished` that is in the future. A scheduled task has been introduced to grant `STATUS_PUBLISHED` when the date has been reached.

A `Submission`'s status will be updated automatically when any of its `Publication` objects have been published or unpublished. Never set the `status` directly for submissions and publications. Instead, use `Services::get('publication')->publish($publication)` and `Services::get('publication')->unpublish($publication)` to ensure the correct hooks are fired and the submission's `status` is kept in sync.

Once a `Submission` has been published, it will remain `STATUS_PUBLISHED` as long as one `Publication` object is published.

## Changes to Service and QueryBuilder syntax

A Service class's `getMany()` method now returns a `DAOResultIterator` instead of an array. The iterator can be used like an array in `foreach` loops:

```php
$contextsIterator = Services::get('context')->getMany(['isEnabled' => true]);
foreach ($contextsIterator as $context) {
    $names[] = $context->getLocalizedData('name');
}
```

However, a `DAOResultIterator` is not an array. It can not be looped over twice and it can not be used with the `array_map`, `array_filter` or `array_reduce` functions.

Use `count()` instead of `!empty()` to check if any results were found.

```php
$contextsIterator = Services::get('context')->getMany(['isEnabled' => true]);
if (count($contextsIterator)) {
	// one or more contexts were found
}
```

Our documentation has been updated to reflect this change as well as new methods for the [Service](/dev/documentation/en/architecture-services#entityreadinterface) and [QueryBuilder](http://localhost:4000/dev/documentation/en/architecture-database#querybuilder) classes to help you retrieve data.

## Service class to retrieve usage and editorial stats

New service classes are available to help you retrieve and calculate statistics about your information. The `PKPStatsService` will help extract data on visits to journals, articles and galleys. And the `PKPStatsEditorialService` will help you calculate data on submissions received, accepted and published, and the time authors must wait for editorial decisions.

Read more about working with [reader](/dev/documentation/en/statistics-reader) and [editorial](/dev/documentation/en/statistics-editorial) statistics. You may also retrieve many stats through the [API](/dev/api/ojs/3.2).

## New API endpoints

Several new API endpoints have been introduced. Endpoints are now available to:

- Add, edit, version and publish submissions
- Create journals and presses and modify their settings
- Retrieve reader and editorial stats
- Add, edit and delete email templates

Read the [API Reference](/dev/api/ojs/3.2).

## New forms for context settings and submission metadata

- Forms and Settings
- Add, edit or remove a form
- link to main documentation if possible
	or mention that more is coming soon

## Article and Monograph objects renamed

The `Article` and `Monograph` objects were renamed to `Submission`. This should help us share code between the applications.

## More theme options

Theme options now support all of the form field types in our [UI Library](/dev/ui-library/3.2) except the image and file upload fields. Read our updated [theming guide](/pkp-theming-guide/en/).

## New components in UI Library

Our UI Library is growing rapidly as we transition our editorial backend to Vue.js. Explore all the components available in our [UI Library](/dev/ui-library/3.2).

## Config settings

Two settings have been be added to the `config.inc.php` file.

A new setting, `api_secret_key`, must be set in order to use the API with an [API Token](http://localhost:4000/dev/api/#api-token).

An unsubscribe link is now sent with each automated email. A new setting, `signed_page_key_secret` must be sent in order for this link to work.
